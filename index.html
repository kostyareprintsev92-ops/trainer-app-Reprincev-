<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç—Ä–µ–Ω–µ—Ä–∞</title>
  <style>
    :root { --bg:#f6f6f6; --card:#fff; --txt:#111; --muted:#666; --pri:#111; }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--txt);font:16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Arial}
    .wrap{max-width:900px;margin:20px auto;padding:0 14px}
    .bar{position:sticky;top:0;z-index:10;background:#fff8;backdrop-filter: blur(6px);border-bottom:1px solid #e6e6e6}
    .bar-in{max-width:900px;margin:0 auto;padding:10px 14px;display:flex;gap:8px;align-items:center}
    h1{font-size:20px;margin:0;font-weight:800}
    .card{background:var(--card);border:1px solid #e7e7e7;border-radius:12px;padding:14px}
    .grid{display:grid;gap:14px}
    .ttl{font-weight:700;margin-bottom:6px}
    .in{padding:10px 12px;border:1px solid #d9d9d9;border-radius:10px;background:#fff}
    .btn{padding:10px 14px;border-radius:10px;border:1px solid #111;background:#111;color:#fff;cursor:pointer}
    .muted{color:var(--muted);font-size:14px}
    #msg{display:none;padding:10px;border-radius:10px;background:#e9fbe9;border:1px solid #bde5bd}
    .footer{margin-top:24px;color:#888;font-size:13px;text-align:center}
  </style>
</head>
<body>
  <div class="bar">
    <div class="bar-in">
      <h1>–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç—Ä–µ–Ω–µ—Ä–∞</h1>
    </div>
  </div>

  <div class="wrap grid">
    <!-- –§–æ—Ä–º–∞ –∑–∞–ø–∏—Å–∏ –∫–ª–∏–µ–Ω—Ç–∞ -->
    <div class="card">
      <div class="ttl">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É</div>
      <div class="muted" style="margin-bottom:8px">–û—Å—Ç–∞–≤—å—Ç–µ –¥–∞–Ω–Ω—ã–µ ‚Äî —è –ø–æ–¥—Ç–≤–µ—Ä–∂—É –∑–∞–ø–∏—Å—å –∏ —Å–≤—è–∂—É—Å—å —Å –≤–∞–º–∏.</div>

      <form id="signupForm" class="grid" style="grid-template-columns:1fr;max-width:520px">
        <input id="name" class="in" type="text" placeholder="–ò–º—è" required />
        <input id="phone" class="in" type="tel" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω" required />
        <input id="date" class="in" type="date" required />
        <select id="time" class="in" required>
          <option value="" disabled selected>–í—Ä–µ–º—è</option>
          <option>07:00</option><option>08:00</option><option>09:00</option>
          <option>18:00</option><option>19:00</option><option>20:00</option>
        </select>
        <input id="comment" class="in" type="text" placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)" />
        <button class="btn" type="submit">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è</button>
        <div id="msg">–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ üëç</div>
      </form>
    </div>

    <div class="footer">
      –°–¥–µ–ª–∞–Ω–æ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∑–∞–ø–∏—Å–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤. –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ Cloud Firestore.
    </div>
  </div>

  <!-- Firebase + Firestore (–º–æ–¥—É–ª—å–Ω—ã–π SDK) -->
  <script type="module">
    // –ò–º–ø–æ—Ä—Ç SDK Firebase
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import {
      getFirestore, collection, addDoc, serverTimestamp
    } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    // –¢–≤–æ—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–∑ Firebase (–æ—Å—Ç–∞–≤–∏–ª —Ç–≤–æ—é)
    const firebaseConfig = {
      apiKey: "AIzaSyA3XwM-qceM1_uMuK7NpTa7RKQyAyQw1Ws",
      authDomain: "reprincev-b73c7.firebaseapp.com",
      projectId: "reprincev-b73c7",
      storageBucket: "reprincev-b73c7.firebasestorage.app",
      messagingSenderId: "616952094737",
      appId: "1:616952094737:web:82f22ef07d9f13309911b0",
      measurementId: "G-8WFHS344GZ"
    };

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    const app = initializeApp(firebaseConfig);
    const db  = getFirestore(app);

    // –õ–æ–≥–∏–∫–∞ —Ñ–æ—Ä–º—ã
    const form = document.getElementById('signupForm');
    const msg  = document.getElementById('msg');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      const name    = document.getElementById('name').value.trim();
      const phone   = document.getElementById('phone').value.trim();
      const date    = document.getElementById('date').value; // yyyy-mm-dd
      const time    = document.getElementById('time').value;
      const comment = document.getElementById('comment').value.trim();

      if (!name || !phone || !date || !time) return;

      try {
        await addDoc(collection(db, "Trainings"), {
          name, phone, date, time, comment,
          status: "new",
          createdAt: serverTimestamp()
        });

        form.reset();
        msg.textContent = "–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ üëç";
        msg.style.display = "block";
        setTimeout(() => (msg.style.display = "none"), 2500);
      } catch (err) {
        console.error(err);
        msg.textContent = "–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑.";
        msg.style.display = "block";
        setTimeout(() => (msg.style.display = "none"), 3000);
      }
    });
  </script>
</body>
</html>
